(()=>{"use strict";function n(n){return n&&"object"==typeof n&&!Array.isArray(n)}function e(t,...r){if(!r.length)return t;const o=r.shift();if(n(t)&&n(o))for(const r in o)n(o[r])?(t[r]||Object.assign(t,{[r]:{}}),e(t[r],o[r])):Object.assign(t,{[r]:o[r]});return e(t,...r)}function t(n){const e=new DataView(wasmMemory.buffer),t=e.getUint32(n,!0),r=e.getUint32(n+4,!0)-t,o=new Uint8Array(wasmMemory.buffer,t,r),i=new TextDecoder("ascii").decode(o);wyff.logger.info(`Sending message to server: ${i} [${o.join("\t")}]`)}function r(n){return async function(r,o={}){wyff.logger.info("WebAssembly.instantiate() intercepted");const i=function(n){const e=new WailParser(n),r={env:{}};r.env.encryptionHook=t;const o=function(n,e,t,r){return n.addImportEntry({moduleStr:"env",fieldStr:"encryptionHook",kind:"func",type:n.addTypeEntry({form:"func",params:["i32"],returnType:void 0})})}(e);return function(n,e){n.addCodeElementParser(2656,(function({bytes:n}){const t=new BufferReader(n);return t.copyBuffer([OP_GET_LOCAL]),t.copyBuffer(VarUint32(0)),t.copyBuffer([OP_CALL]),t.copyBuffer(e.varUint32()),t.copyBuffer(n),t.write()}))}(e,o),e.parse(),function(n,e){return{imports:n,binary:e}}(r,e.write())}(r);return i.imports&&(o=e(o,i.imports)),n(i.binary,o)}}async function o(){if(sourceObj instanceof Promise)return(await sourceObj).arrayBuffer();if(sourceObj instanceof Response)return await sourceObj.arrayBuffer();throw new Error("Got unexpected object type as first argument to WebAssembly.instantiateStreaming")}const i=new class{constructor(n,e,t){this.infoWriter=n||console.log,this.debugWriter=e||console.debug,this.errorWriter=t||console.error;const r=["font-size: 1.6em","font-weight: bold","text-transform: uppercase"].join(";");this.info=this.infoWriter.bind(console,"%c[WYFF]%c INFO\t%s",r,""),this.debug=this.debugWriter.bind(console,"%c[WYFF]%c DEBUG\t%s",r,""),this.error=this.errorWriter.bind(console,"%c[WYFF]%c ERROR\t%s",r,"")}};window.wyff={logger:i},wyff.logger.debug("hooking function to remove debugger protection"),window._Function=Function,window.Function=function(){window.c=n=>n?()=>()=>{}:null,wyff.logger.debug("debugger protection removed");const n=window._Function.apply(this,arguments);return window.Function=window._Function,n},wyff.logger.info("hooking WASM functions"),function(){const n=r(WebAssembly.instantiate);window.WebAssembly.instantiate=n}(),WebAssembly.instantiateStreaming,window.WebAssembly.instantiateStreaming=async function(n,e={}){wyff.logger.info("WebAssembly.instantiateStreaming() intercepted");const t=await o();return WebAssembly.instantiate(t,e)}})();
//# sourceMappingURL=content-script.js.map